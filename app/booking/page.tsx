'use client'; import { useForm } from 'react-hook-form'; import { zodResolver } from '@hookform/resolvers/zod'; import { bookingSchema,type BookingInput } from '@/lib/validators'; import { useState } from 'react'; export default function Booking(){ const [done,setDone]=useState(false); const {register,handleSubmit,formState:{errors,isSubmitting}}=useForm<BookingInput>({resolver:zodResolver(bookingSchema)}); const onSubmit=async(d:BookingInput)=>{ const res=await fetch('/api/booking',{method:'POST',body:JSON.stringify(d)}); const j=await res.json(); if(j.ok) setDone(true); }; if(done) return <div className='container py-10'><h1 className='text-2xl font-semibold'>Request submitted</h1><p className='opacity-80 mt-2'>We placed a temporary calendar hold. Youâ€™ll receive a custom quote by email/text.</p></div>; return <div className='container py-10'><h1 className='text-3xl font-semibold mb-4'>Request a Time (No Prices Shown)</h1><form onSubmit={handleSubmit(onSubmit)} className='grid gap-4 max-w-2xl'><fieldset className='card'><legend className='font-semibold'>Service & Facility</legend><input className='input' placeholder='Service' {...register('service')}/><select className='input' {...register('propertyType')}><option value='office'>Office</option><option value='retail'>Retail</option><option value='medical'>Medical</option><option value='dental'>Dental</option><option value='education'>Education</option><option value='industrial'>Industrial</option><option value='residential'>Residential</option><option value='str'>STR / Airbnb</option><option value='construction'>Construction</option><option value='event'>Event</option></select><input className='input' type='number' placeholder='Approx. Square Feet' {...register('sqft',{valueAsNumber:true})}/></fieldset><fieldset className='card'><legend className='font-semibold'>Date & Time</legend><input className='input' type='date' {...register('date')}/><input className='input' type='time' {...register('time')}/></fieldset><fieldset className='card'><legend className='font-semibold'>Contact</legend><div className='grid grid-cols-2 gap-2'><input className='input' placeholder='First name' {...register('firstName')}/><input className='input' placeholder='Last name' {...register('lastName')}/></div><input className='input' type='email' placeholder='Email' {...register('email')}/><input className='input' placeholder='Phone' {...register('phone')}/><input className='input' placeholder='Address' {...register('address')}/><textarea className='input' placeholder='Notes (optional)' {...register('notes')}/><label className='flex items-center gap-2'><input type='checkbox' {...register('smsOptIn')}/> SMS updates</label></fieldset><button disabled={isSubmitting} className='btn btn-primary'>Submit for Custom Quote</button><div className='text-sm text-red-600'>{Object.values(errors).length>0 && 'Please correct the highlighted fields.'}</div></form></div>; }